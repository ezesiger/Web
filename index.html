<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="style.css">
    <style>
    </style>
    <title>Notes App</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
</head>
<body>
    <div class="draggable" id="draggable">
        <!-- link all page iframes on homepage -->
        <div class="frame">
            <div class="head"> &nbsp;</div>
            <div class="content"></div>
            <a href="Note1.html"><iframe src="Note1.html"></iframe></a>
        </div>

        <div class="frame">
            <div class="head"> &nbsp;</div>
            <div class="content"></div>
            <a href="Note2.html"><iframe src="Note2.html"></iframe></a>
        </div>

        <div class="frame">
            <div class="head"> &nbsp;</div>
            <div class="content"></div>
            <a href="Note3.html"><iframe src="Note3.html"></iframe></a>
        </div>

        <div class="frame">
            <div class="head"> &nbsp;</div>
            <div class="content"></div>
            <a href="Note4.html"><iframe src="Note4.html"></iframe></a>
        </div>

        <div class="frame">
            <div class="head"> &nbsp;</div>
            <div class="content"></div>
            <a href="Note5.html"><iframe src="Note5.html"></iframe></a>
        </div>

        <div class="frame">
            <div class="head"> &nbsp;</div>
            <div class="content"></div>
            <a href="Note6.html"><iframe src="Note6.html"></iframe></a>
        </div>

        <div class="frame">
            <div class="head"> &nbsp;</div>
            <div class="content"></div>
            <a href="Note7.html"><iframe src="Note7.html"></iframe></a>
        </div>

        <div class="frame">
            <div class="head"> &nbsp;</div>
            <div class="content"></div>
            <a href="Note8.html"><iframe src="Note8.html"></iframe></a>
        </div>

        <div class="frame">
            <div class="head"> &nbsp;</div>
            <div class="content"></div>
            <a href="Note9.html"><iframe src="Note9.html"></iframe></a>
        </div>

        <div class="frame">
            <div class="head"> &nbsp;</div>
            <div class="content"></div>
            <a href="Note10.html"><iframe src="Note10.html"></iframe></a>
        </div>

        <div class="frame">
            <div class="head"> &nbsp;</div>
            <div class="content"></div>
            <a href="Note11.html"><iframe src="Note11.html"></iframe></a>
        </div>

        <div class="frame">
            <div class="head"> &nbsp;</div>
            <div class="content"></div>
            <a href="Note12.html"><iframe src="Note12.html"></iframe></a>
        </div>
        
        <div class="frame">
            <div class="head"> &nbsp;</div>
                <div class="content"></div>
            <a href="Note13.html"><iframe src="Note13.html"></iframe></a>
        </div>

                    <div class="frame">
            <div class="head"> &nbsp;</div>
                <div class="content"></div>
            <a href="Note14.html"><iframe src="Note14.html"></iframe></a>
        </div>

        <div class="frame">
            <div class="head"> &nbsp;</div>
                <div class="content"></div>
            <a href="Note15.html"><iframe src="Note15.html"></iframe></a>
        </div>

        <div class="frame">
            <div class="head"> &nbsp;</div>
                <div class="content"></div>
            <a href="Note16.html"><iframe src="Note16.html"></iframe></a>
        </div>

        <div class="frame">
            <div class="head"> &nbsp;</div>
                <div class="content"></div>
            <a href="Note17.html"><iframe src="Note17.html"></iframe></a>
        </div>

        <div class="frame">
            <div class="head"> &nbsp;</div>
                <div class="content"></div>
            <a href="Note18.html"><iframe src="Note18.html"></iframe></a>
        </div>

        <div class="frame">
            <div class="head"> &nbsp;</div>
                <div class="content"></div>
            <a href="Note19.html"><iframe src="Note19.html"></iframe></a>
        </div>

        <div class="frame">
            <div class="head"> &nbsp;</div>
                <div class="content"></div>
            <a href="Note20.html"><iframe src="Note20.html"></iframe></a>
        </div>

        <div class="frame">
            <div class="head"> &nbsp;</div>
                <div class="content"></div>
            <a href="Note21.html"><iframe src="Note21.html"></iframe></a>
        </div>

        <div class="frame">
            <div class="head"> &nbsp;</div>
                <div class="content"></div>
            <a href="Note22.html"><iframe src="Note22.html"></iframe></a>
        </div>

        <div class="frame">
            <div class="head"> &nbsp;</div>
                <div class="content"></div>
            <a href="Note23.html"><iframe src="Note23.html"></iframe></a>
        </div>

        <div class="frame">
            <div class="head"> &nbsp;</div>
                <div class="content"></div>
            <a href="Note24.html"><iframe src="Note24.html"></iframe></a>
        </div>

        <div class="frame">
        <div class="head"> &nbsp;</div>
        <div class="content"></div>
        <a href="Note25.html"><iframe src="Note25.html"></iframe></a>
        </div>

        <div class="frame">
            <div class="head"> &nbsp;</div>
            <div class="content"></div>
            <a href="Note26.html"><iframe src="Note26.html"></iframe></a>
        </div>

        <div class="frame">
            <div class="head"> &nbsp;</div>
            <div class="content"></div>
            <a href="Note27.html"><iframe src="Note27.html"></iframe></a>
        </div>

        <div class="frame">
            <div class="head"> &nbsp;</div>
            <div class="content"></div>
            <a href="Note28.html"><iframe src="Note28.html"></iframe></a>
        </div>

        <div class="frame">
            <div class="head"> &nbsp;</div>
            <div class="content"></div>
            <a href="Note29.html"><iframe src="Note29.html"></iframe></a>
        </div>

        <div class="frame">
            <div class="head"> &nbsp;</div>
            <div class="content"></div>
            <a href="Note30.html"><iframe src="Note30.html"></iframe></a>
        </div>

        <div class="frame">
            <div class="head"> &nbsp;</div>
                <div class="content"></div>
            <a href="Note31.html"><iframe src="Note31.html"></iframe></a>
        </div>

                    <div class="frame">
            <div class="head"> &nbsp;</div>
                <div class="content"></div>
            <a href="Note32.html"><iframe src="Note32.html"></iframe></a>
        </div>

        <div class="frame">
            <div class="head"> &nbsp;</div>
                <div class="content"></div>
            <a href="Note33.html"><iframe src="Note33.html"></iframe></a>
        </div>

        <div class="frame">
            <div class="head"> &nbsp;</div>
                <div class="content"></div>
            <a href="Note34.html"><iframe src="Note34.html"></iframe></a>
        </div>

        <div class="frame">
            <div class="head"> &nbsp;</div>
                <div class="content"></div>
            <a href="Note35.html"><iframe src="Note35.html"></iframe></a>
        </div>

        <div class="frame">
            <div class="head"> &nbsp;</div>
                <div class="content"></div>
            <a href="Note36.html"><iframe src="Note36.html"></iframe></a>
        </div>

        <div class="frame">
            <div class="head"> &nbsp;</div>
                <div class="content"></div>
            <a href="Note37.html"><iframe src="Note37.html"></iframe></a>
        </div>

        <div class="frame">
            <div class="head"> &nbsp;</div>
                <div class="content"></div>
            <a href="Note38.html"><iframe src="Note38.html"></iframe></a>
        </div>

        <div class="frame">
            <div class="head"> &nbsp;</div>
                <div class="content"></div>
            <a href="Note39.html"><iframe src="Note39.html"></iframe></a>
        </div>

        <div class="frame">
            <div class="head"> &nbsp;</div>
                <div class="content"></div>
            <a href="Note40.html"><iframe src="Note40.html"></iframe></a>
        </div>

    </div>
    
    <div class="bar">
        <div class="message"><marquee scrollamount="20">I AM NOT RECORDING YOU BUT YOU ARE BEING RECORDED</marquee></div>
        <p id="intro">This is a collection of 40 notes from my notes app. Read more about this project <a href="Intro.html">here</a></p>
        <button id="randomize">↳↰</button>
    </div>

    <script>
        // Position frames randomly
        function positionFramesRandomly() {
            const frames = document.querySelectorAll('.frame');
            const draggable = document.getElementById('draggable');
            const draggableRect = draggable.getBoundingClientRect();
            const windowHeight = window.innerHeight;
            
            // Calculate available space for frames
            const availableWidth = draggableRect.width - 300; // frame width
            const availableHeight = draggableRect.height +550; // frame height
            
            frames.forEach(frame => {
                // Generate random positions within the available space
                const randomX = Math.floor(Math.random() * availableWidth);
                const randomY = Math.floor(Math.random() * availableHeight);
                
                // Apply the random positions
                frame.style.left = `${randomX}px`;
                frame.style.top = `${randomY}px`;
            });
        }
        
        // Position frames randomly when the page loads
        window.addEventListener('load', positionFramesRandomly);
        
        // Also position frames randomly when the randomize button is clicked
        document.getElementById('randomize').addEventListener('click', positionFramesRandomly);
        
        // Dragging functionality
        (function () {
            const draggable = document.getElementById('draggable');
            let active = null;         // the .frame being dragged
            let startX = 0, startY = 0; // pointer start
            let baseX = 0, baseY = 0;   // element base translate
            let raf = null;

            const getTranslate = (el) => {
                const m = new DOMMatrixReadOnly(getComputedStyle(el).transform);
                return { x: m.m41, y: m.m42 };
            };

            const onPointerMove = (e) => {
                if (!active) return;
                const dx = e.clientX - startX;
                const dy = e.clientY - startY;
                const nextX = baseX + dx;
                const nextY = baseY + dy;

                

                // avoid running style work more than necessary
                if (!raf) {
                    raf = requestAnimationFrame(() => {
                        active.style.transform = `translate(${nextX}px, ${nextY}px)`;
                        raf = null;
                    });
                }
            };

            const endDrag = () => {
                if (!active) return;
                active.classList.remove('dragging');
                // reenable pointer events on the iframe so you can interact with it again
                const f = active.querySelector('iframe');
                if (f) f.style.pointerEvents = '';
                active.releasePointerCapture?.(active._pointerId);
                active = null;
                window.removeEventListener('pointermove', onPointerMove);
                window.removeEventListener('pointerup', endDrag);
                window.removeEventListener('pointercancel', endDrag);
            };

            draggable.addEventListener('pointerdown', (e) => {
                const head = e.target.closest('.head');
                const frame = head?.closest('.frame');
                if (!frame) return;

                active = frame;
                active._pointerId = e.pointerId;
                active.setPointerCapture?.(e.pointerId);

                // current translate as base
                const { x, y } = getTranslate(active);
                baseX = isNaN(x) ? 0 : x;
                baseY = isNaN(y) ? 0 : y;

                //start relative to pointer
                startX = e.clientX;
                startY = e.clientY;

                active.classList.add('dragging');
                active.style.zIndex = String(Date.now()); // bring to front

                // disable iframe pointer events during drag so it doesnt swallow moves
                const f = active.querySelector('iframe');
                if (f) f.style.pointerEvents = 'none';

                window.addEventListener('pointermove', onPointerMove);
                window.addEventListener('pointerup', endDrag);
                window.addEventListener('pointercancel', endDrag);
            }, { passive: true });


        })();
    </script>
</body>
</html>